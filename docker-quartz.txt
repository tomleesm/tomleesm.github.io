docker pull node:latest
docker run --rm -it -w /app -v ./content:/app/content -p 8080:8080 node:latest /bin/sh
git clone https://github.com/jackyzha0/quartz.git tmp
cd tmp && rm -rf content && mv -f * ../ && cd .. && rm -rf tmp
npm ci
npx quartz build -d docs --serve
npx quartz build --serve
---

FROM node:latest
WORKDIR /app
VOLUME /app/content
EXPOSE 8080
RUN git clone https://github.com/jackyzha0/quartz.git tmp
RUN cd tmp && rm -rf content && mv -f * ../ && cd .. && rm -rf tmp
RUN npm ci
CMD ["npx", "quartz", "build", "--serve"]

docker build . -t quartz:latest
---
services:
  wiki:
    build: .
    volumes:
      - ./content:/app/content
    ports:
      - 8080:8080
    restart: unless-stopped

docker compose up -d
---------
## BUILD
docker compose exec -it wiki /bin/sh
npx quartz build
cp -r public/* /tmp/public/
exit

## DEPLOY to GitHub Pages
git checkout gh-pages
git add public -f
git commit -m "update GitHub Pages"
git subtree push --prefix public origin gh-pages
git checkout -
---
